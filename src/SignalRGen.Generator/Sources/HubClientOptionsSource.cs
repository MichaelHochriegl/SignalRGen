using System.Text;
using Microsoft.CodeAnalysis;
using Microsoft.CodeAnalysis.CSharp;
using Microsoft.CodeAnalysis.CSharp.Syntax;
using Microsoft.CodeAnalysis.Text;
using static Microsoft.CodeAnalysis.CSharp.SyntaxFactory;

namespace SignalRGen.Generator.Sources;

internal static class HubClientOptionsSource
{
    public static SourceText GetSource() =>
        CompilationUnit()
            .WithUsings(
                List<UsingDirectiveSyntax>(
                    new UsingDirectiveSyntax[]
                    {
                        UsingDirective(
                                QualifiedName(
                                    QualifiedName(
                                        QualifiedName(
                                            IdentifierName("Microsoft"),
                                            IdentifierName("AspNetCore")),
                                        IdentifierName("SignalR")),
                                    IdentifierName("Client")))
                            .WithUsingKeyword(
                                AutoGeneratedHintSource.GetSyntaxToken(
                                    SyntaxKind.UsingKeyword)),
                        UsingDirective(
                            QualifiedName(
                                QualifiedName(
                                    IdentifierName("Microsoft"),
                                    IdentifierName("Extensions")),
                                IdentifierName("DependencyInjection")))
                    }))
            .WithMembers(
                SingletonList<MemberDeclarationSyntax>(
                    FileScopedNamespaceDeclaration(
                            QualifiedName(
                                QualifiedName(
                                    QualifiedName(
                                        IdentifierName("SignalRGen"),
                                        IdentifierName("Generator")),
                                    IdentifierName("Client")),
                                IdentifierName("Configuration")))
                        .WithNamespaceKeyword(
                            NullableEnabledSource.GetSyntaxToken(SyntaxKind
                                .NamespaceKeyword))
                        .WithMembers(
                            SingletonList<MemberDeclarationSyntax>(
                                ClassDeclaration("HubClientOptions")
                                    .WithModifiers(
                                        TokenList(
                                            Token(
                                                TriviaList(
                                                    Trivia(
                                                        DocumentationCommentTrivia(
                                                            SyntaxKind
                                                                .SingleLineDocumentationCommentTrivia,
                                                            List<XmlNodeSyntax>(
                                                                new
                                                                    XmlNodeSyntax
                                                                    []
                                                                    {
                                                                        XmlText()
                                                                            .WithTextTokens(
                                                                                TokenList(
                                                                                    XmlTextLiteral(
                                                                                        TriviaList(
                                                                                            DocumentationCommentExterior(
                                                                                                "///")),
                                                                                        " ",
                                                                                        " ",
                                                                                        TriviaList()))),
                                                                        XmlExampleElement(
                                                                                SingletonList
                                                                                    <XmlNodeSyntax>(
                                                                                        XmlText()
                                                                                            .WithTextTokens(
                                                                                                TokenList(
                                                                                                    new
                                                                                                        []
                                                                                                        {
                                                                                                            XmlTextNewLine(
                                                                                                                TriviaList(),
                                                                                                                "\n",
                                                                                                                "\n",
                                                                                                                TriviaList()),
                                                                                                            XmlTextLiteral(
                                                                                                                TriviaList(
                                                                                                                    DocumentationCommentExterior(
                                                                                                                        "///")),
                                                                                                                " Encapsulates the options to configure a SignalR Hub Client.",
                                                                                                                " Encapsulates the options to configure a SignalR Hub Client.",
                                                                                                                TriviaList()),
                                                                                                            XmlTextNewLine(
                                                                                                                TriviaList(),
                                                                                                                "\n",
                                                                                                                "\n",
                                                                                                                TriviaList()),
                                                                                                            XmlTextLiteral(
                                                                                                                TriviaList(
                                                                                                                    DocumentationCommentExterior(
                                                                                                                        "///")),
                                                                                                                " ",
                                                                                                                " ",
                                                                                                                TriviaList())
                                                                                                        }))))
                                                                            .WithStartTag(
                                                                                XmlElementStartTag(
                                                                                    XmlName(
                                                                                        Identifier(
                                                                                            "summary"))))
                                                                            .WithEndTag(
                                                                                XmlElementEndTag(
                                                                                    XmlName(
                                                                                        Identifier(
                                                                                            "summary")))),
                                                                        XmlText()
                                                                            .WithTextTokens(
                                                                                TokenList(
                                                                                    XmlTextNewLine(
                                                                                        TriviaList(),
                                                                                        "\n",
                                                                                        "\n",
                                                                                        TriviaList())))
                                                                    })))),
                                                SyntaxKind.PublicKeyword,
                                                TriviaList())))
                                    .WithMembers(
                                        List<MemberDeclarationSyntax>(
                                            new MemberDeclarationSyntax[]
                                            {
                                                PropertyDeclaration(
                                                        GenericName(
                                                                Identifier("Action"))
                                                            .WithTypeArgumentList(
                                                                TypeArgumentList(
                                                                    SingletonSeparatedList<TypeSyntax>(
                                                                        IdentifierName("IHubConnectionBuilder")))),
                                                        Identifier("HubConnectionBuilderConfiguration"))
                                                    .WithModifiers(
                                                        TokenList(
                                                            Token(
                                                                TriviaList(
                                                                    Trivia(
                                                                        DocumentationCommentTrivia(
                                                                            SyntaxKind
                                                                                .SingleLineDocumentationCommentTrivia,
                                                                            List<XmlNodeSyntax>(
                                                                                new XmlNodeSyntax[]
                                                                                {
                                                                                    XmlText()
                                                                                        .WithTextTokens(
                                                                                            TokenList(
                                                                                                XmlTextLiteral(
                                                                                                    TriviaList(
                                                                                                        DocumentationCommentExterior(
                                                                                                            "///")),
                                                                                                    " ",
                                                                                                    " ",
                                                                                                    TriviaList()))),
                                                                                    XmlExampleElement(
                                                                                            XmlText()
                                                                                                .WithTextTokens(
                                                                                                    TokenList(
                                                                                                        XmlTextLiteral(
                                                                                                            TriviaList(),
                                                                                                            "The configuration used to setup the ",
                                                                                                            "The configuration used to setup the ",
                                                                                                            TriviaList()))),
                                                                                            XmlNullKeywordElement()
                                                                                                .WithAttributes(
                                                                                                    SingletonList<
                                                                                                        XmlAttributeSyntax>(
                                                                                                        XmlCrefAttribute(
                                                                                                            NameMemberCref(
                                                                                                                IdentifierName(
                                                                                                                    "HubConnectionBuilder"))))),
                                                                                            XmlText()
                                                                                                .WithTextTokens(
                                                                                                    TokenList(
                                                                                                        XmlTextLiteral(
                                                                                                            TriviaList(),
                                                                                                            " that will be used to build to the ",
                                                                                                            " that will be used to build to the ",
                                                                                                            TriviaList()))),
                                                                                            XmlNullKeywordElement()
                                                                                                .WithAttributes(
                                                                                                    SingletonList<
                                                                                                        XmlAttributeSyntax>(
                                                                                                        XmlCrefAttribute(
                                                                                                            NameMemberCref(
                                                                                                                IdentifierName(
                                                                                                                    "HubConnection"))))),
                                                                                            XmlText()
                                                                                                .WithTextTokens(
                                                                                                    TokenList(
                                                                                                        XmlTextLiteral(
                                                                                                            TriviaList(),
                                                                                                            ".",
                                                                                                            ".",
                                                                                                            TriviaList()))))
                                                                                        .WithStartTag(
                                                                                            XmlElementStartTag(
                                                                                                XmlName(
                                                                                                    Identifier(
                                                                                                        "summary"))))
                                                                                        .WithEndTag(
                                                                                            XmlElementEndTag(
                                                                                                XmlName(
                                                                                                    Identifier(
                                                                                                        "summary")))),
                                                                                    XmlText()
                                                                                        .WithTextTokens(
                                                                                            TokenList(
                                                                                                XmlTextNewLine(
                                                                                                    TriviaList(),
                                                                                                    "\n",
                                                                                                    "\n",
                                                                                                    TriviaList())))
                                                                                })))),
                                                                SyntaxKind.PublicKeyword,
                                                                TriviaList())))
                                                    .WithAccessorList(
                                                        AccessorList(
                                                            List<AccessorDeclarationSyntax>(
                                                                new AccessorDeclarationSyntax[]
                                                                {
                                                                    AccessorDeclaration(
                                                                            SyntaxKind.GetAccessorDeclaration)
                                                                        .WithSemicolonToken(
                                                                            Token(SyntaxKind.SemicolonToken)),
                                                                    AccessorDeclaration(
                                                                            SyntaxKind.SetAccessorDeclaration)
                                                                        .WithSemicolonToken(
                                                                            Token(SyntaxKind.SemicolonToken))
                                                                })))
                                                    .WithInitializer(
                                                        EqualsValueClause(
                                                            PostfixUnaryExpression(
                                                                SyntaxKind.SuppressNullableWarningExpression,
                                                                LiteralExpression(
                                                                    SyntaxKind.DefaultLiteralExpression,
                                                                    Token(SyntaxKind.DefaultKeyword)))))
                                                    .WithSemicolonToken(
                                                        Token(SyntaxKind.SemicolonToken)),
                                                PropertyDeclaration(
                                                        IdentifierName(
                                                            "ServiceLifetime"),
                                                        Identifier(
                                                            "HubClientLifetime"))
                                                    .WithModifiers(
                                                        TokenList(
                                                            Token(
                                                                TriviaList(
                                                                    Trivia(
                                                                        DocumentationCommentTrivia(
                                                                            SyntaxKind
                                                                                .SingleLineDocumentationCommentTrivia,
                                                                            List
                                                                                <XmlNodeSyntax>(
                                                                                    new
                                                                                        XmlNodeSyntax
                                                                                        []
                                                                                        {
                                                                                            XmlText()
                                                                                                .WithTextTokens(
                                                                                                    TokenList(
                                                                                                        XmlTextLiteral(
                                                                                                            TriviaList(
                                                                                                                DocumentationCommentExterior(
                                                                                                                    "///")),
                                                                                                            " ",
                                                                                                            " ",
                                                                                                            TriviaList()))),
                                                                                            XmlExampleElement(
                                                                                                    XmlText()
                                                                                                        .WithTextTokens(
                                                                                                            TokenList(
                                                                                                                XmlTextLiteral(
                                                                                                                    TriviaList(),
                                                                                                                    "The ",
                                                                                                                    "The ",
                                                                                                                    TriviaList()))),
                                                                                                    XmlNullKeywordElement()
                                                                                                        .WithAttributes(
                                                                                                            SingletonList
                                                                                                                <XmlAttributeSyntax>(
                                                                                                                    XmlCrefAttribute(
                                                                                                                        NameMemberCref(
                                                                                                                            IdentifierName(
                                                                                                                                "ServiceLifetime"))))),
                                                                                                    XmlText()
                                                                                                        .WithTextTokens(
                                                                                                            TokenList(
                                                                                                                XmlTextLiteral(
                                                                                                                    TriviaList(),
                                                                                                                    " used to register the Hub Client with the DI container.",
                                                                                                                    " used to register the Hub Client with the DI container.",
                                                                                                                    TriviaList()))))
                                                                                                .WithStartTag(
                                                                                                    XmlElementStartTag(
                                                                                                        XmlName(
                                                                                                            Identifier(
                                                                                                                "summary"))))
                                                                                                .WithEndTag(
                                                                                                    XmlElementEndTag(
                                                                                                        XmlName(
                                                                                                            Identifier(
                                                                                                                "summary")))),
                                                                                            XmlText()
                                                                                                .WithTextTokens(
                                                                                                    TokenList(
                                                                                                        XmlTextNewLine(
                                                                                                            TriviaList(),
                                                                                                            "\n",
                                                                                                            "\n",
                                                                                                            TriviaList())))
                                                                                        })))),
                                                                SyntaxKind
                                                                    .PublicKeyword,
                                                                TriviaList())))
                                                    .WithAccessorList(
                                                        AccessorList(
                                                            List<
                                                                AccessorDeclarationSyntax>(
                                                                new
                                                                    AccessorDeclarationSyntax
                                                                    []
                                                                    {
                                                                        AccessorDeclaration(
                                                                                SyntaxKind
                                                                                    .GetAccessorDeclaration)
                                                                            .WithSemicolonToken(
                                                                                Token(
                                                                                    SyntaxKind
                                                                                        .SemicolonToken)),
                                                                        AccessorDeclaration(
                                                                                SyntaxKind
                                                                                    .SetAccessorDeclaration)
                                                                            .WithSemicolonToken(
                                                                                Token(
                                                                                    SyntaxKind
                                                                                        .SemicolonToken))
                                                                    })))
                                                    .WithInitializer(
                                                        EqualsValueClause(
                                                            MemberAccessExpression(
                                                                SyntaxKind
                                                                    .SimpleMemberAccessExpression,
                                                                IdentifierName(
                                                                    "ServiceLifetime"),
                                                                IdentifierName(
                                                                    "Singleton"))))
                                                    .WithSemicolonToken(
                                                        Token(SyntaxKind
                                                            .SemicolonToken))
                                            }))))))
            .NormalizeWhitespace()
            .GetText(Encoding.UTF8);
}